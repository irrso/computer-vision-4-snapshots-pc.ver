# ğŸ“· MediaPipeì™€ PyQtë¥¼ ì´ìš©í•œ ì¸ìƒ ë„¤ì»· pc í”„ë¡œê·¸ë¨

<div align="right">
  ì»´í“¨í„°ë¹„ì „
  ğŸ—“ï¸ 2023.05.26 - 2023.06.11
</div>
<br>

<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/aa89991a-cd4f-4fc5-aadf-59d1aea5cbed">
<br><br>

## ë©”ì¸ ì•„ì´ë””ì–´
- ì¸ìƒ ë„¤ì»·ì„ ì»´í“¨í„°ë¡œ ê°„í¸í•˜ê²Œ ì´¬ì˜í•  ìˆ˜ ì—†ì„ê¹Œâ“
- ì‚¬ëŒì„ ì¸ì‹í•´ì„œ ì—¬ëŸ¬ê°€ì§€ ì–¼êµ´ í•„í„° ê¸°ëŠ¥ì„ ì¶”ê°€í•´ë³´ì ğŸ’¡
- MediaPipeë¥¼ ì´ìš©í•´ ì¸ìƒ ë„¤ì»· í”„ë¡œê·¸ë¨ ì œì‘ ğŸ’»
<br>

## ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤
<!--ë©”ì¸í™”ë©´-->
<h3 align="center">
  í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ë©´ ì‹œì‘ ë˜ëŠ” ë‚˜ê°€ê¸° ë²„íŠ¼ì„ ëˆ„ë¥¼ ìˆ˜ ìˆì–´ìš”! â­
</h3>
<div align="center">
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/21119323-3367-4d59-8dbb-bb420df72c3e"/>
</div>
<hr>

<!--ì‹œì‘-->
<h3 align="center">
  ì‹œì‘ ë²„íŠ¼ì„ ëˆŒëŸ¬ ìº ì„ ì‹¤í–‰ì‹œì¼œë´ìš”! ğŸ“¹
</h3>
<div align="center">

  **ì›¹ìº  ì˜ìƒì´ í™”ë©´ì— ë‚˜íƒ€ë‚˜ê³  ì´¬ì˜ ë²„íŠ¼ê³¼ í•„í„° ë²„íŠ¼ì´ í™œì„±í™”ë¼ìš” ğŸ¤** <br><br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/5c00a0ec-f410-4356-95c7-3e2ebe42a1e7"/>
</div>
<hr>

<!--í•„í„°-->
<h3 align="center">
  í•„í„° ë²„íŠ¼ì„ ëˆŒëŸ¬ ì–¼êµ´ì„ í™•ì¸í•´ë´ìš”! ğŸ«¥
</h3>
<div align="center">
  
   **í•˜ë‚˜ì˜ í•„í„°ë¥¼ ì ìš©í•  ìˆ˜ ìˆì–´ìš” ğŸ¤** <br><br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/339edec5-eadb-4ba3-990b-3602542c721f"/>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/06275901-0bd6-4cb3-ac25-5f8c40a9c2f4"/>
  <br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/9cfd29ae-6086-4147-b05d-6ae03e2f4f6e"/>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/e3f10b83-a288-4f3f-82ff-b917191261b4"/>
  <br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/72953b69-cdd5-49af-b478-60d914041065"/>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/97fa97f4-75fb-4fed-8fe3-7dfe828331f0"/>
  <br><br>
  ìˆœì„œëŒ€ë¡œ ì½”ì— ê±¸ì¹œ ì„ ê¸€ë¼ìŠ¤, ë³¼í„°ì¹˜, ë³¼í•˜íŠ¸, ë¨¸ë¦¬ ìœ„ êµ¬ë¦„, ë§¥í•˜íŠ¸ í•„í„°ê°€ ì ìš©ë¼ìš”. <br>
  í•„í„°ë¥¼ ì ìš©í•˜ê³  ì‹¶ì§€ ì•Šë‹¤ë©´ í•„í„°xë¥¼ ëˆ„ë¥´ë©´ ë¼ìš”.
</div>
<hr>

<!--ì—¬ëŸ¬ëª…-->
<h3 align="center">
  ì—¬ëŸ¬ ì‚¬ëŒë“¤ê³¼ ë‹¤ê°™ì´ ì°ì–´ë´ìš”! ğŸ‘¨ğŸ»â€ğŸ‘©ğŸ»â€ğŸ‘§ğŸ»â€ğŸ‘¦ğŸ»
</h3>
<div align="center">

   **í•„í„° ì ìš©ì€ ìµœëŒ€ 4ëª…ê¹Œì§€ ê°€ëŠ¥í•´ìš” ğŸ¤** <br><br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/fb66d0a2-acce-4b65-8e94-bf179950a48f"/>
</div>
<hr>

<!--ì´¬ì˜-->
<h3 align="center">
  ì´¬ì˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë³¸ê²©ì ìœ¼ë¡œ ì‚¬ì§„ì„ ì°ì–´ë´ìš”! ğŸ“·
</h3>
<div align="center">
  
   **ì˜ìƒì´ ìº¡ì³ë˜ë©° ì›¹ìº  ì™¼ìª½ í•˜ë‹¨ ì˜†ì—ì„œ ì°ì€ íšŸìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš” ğŸ¤** <br><br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/bbfe0083-af29-432a-870e-735212ca3552"/>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/357e14b8-e9bc-4ddf-9ec3-d8cc3b057db6"/>
  <br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/2d13939c-7e04-450e-8946-4cddfd1d6e7e"/>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/b1387ea8-8a70-490f-90b6-162806d66c8f"/>
</div>
<hr>

<!--ì´¬ì˜ì™„ë£Œ-->
<h3 align="center">
  4ë²ˆ ì´¬ì˜ì„ ì™„ë£Œí•˜ê³  ë‚˜ì˜¨ ì‚¬ì§„ì„ í™•ì¸í•´ìš”! ğŸ¥°
</h3>
<div align="center">
  
   **ë‹¤ì‹œ ì°ê³  ì‹¶ë‹¤ë©´ ì¬ì´¬ì˜ì„, ë§ˆìŒì— ë“¤ë©´ ì €ì¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ì¤˜ìš” ğŸ¤** <br><br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/5dc3e0ba-bd73-4146-ba25-ec71c66e446d"/>
</div>
<hr>

<!--ì €ì¥-->
<h3 align="center">
  ì €ì¥ ë²„íŠ¼ì„ ëˆŒëŸ¬ ì›í•˜ëŠ” ìœ„ì¹˜ì— ì‚¬ì§„ì„ ì €ì¥í•´ìš”! âœ…
</h3>
<div align="center">
  
   **íŒŒì¼ ì´ë¦„ì„ ì‘ì„±í•˜ê³  jpeg í˜•ì‹ìœ¼ë¡œ ì €ì¥í•´ìš” ğŸ¤** <br><br>
  <img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/0d502cfd-f212-41c1-ada2-8919848e8954"/>
</div>
<br>

## ê¸°ìˆ  ìŠ¤íƒ
|ë¶„ë¥˜|ê¸°ìˆ  ìŠ¤íƒ|
|:--:|--|
|front|<img src="https://img.shields.io/badge/PyQt-41CD52.svg?style=flat-square&logo=Qt&logoColor=white"/> <img src="https://img.shields.io/badge/Python-3776AB.svg?style=flat-square&logo=python&logoColor=white"/>|
|back|<img src="https://img.shields.io/badge/MediaPipe-20A6C9.svg?style=flat-square&logo=&logoColor=white"/> <img src="https://img.shields.io/badge/OpenCV-5C3EE8.svg?style=flat-square&logo=opencv&logoColor=white"/> <img src="https://img.shields.io/badge/Python-3776AB.svg?style=flat-square&logo=python&logoColor=white"/>|
<br>

## ì‹œìŠ¤í…œ ê¸°ëŠ¥
### í”„ë¡œê·¸ë¨ ì‹¤í–‰
- `QPushButton`ìœ¼ë¡œ ì‹œì‘, ì´¬ì˜, ì¬ì´¬ì˜, ì €ì¥, ë‚˜ê°€ê¸° ë²„íŠ¼ ìƒì„±
- `QRadioButton`ìœ¼ë¡œ í•„í„°1, í•„í„°2, í•„í„°3, í•„í„°4, í•„í„°5, í•„í„°x ë²„íŠ¼ ìƒì„±
- `QLabel`ë¡œ ì´¬ì˜ íšŸìˆ˜ ë ˆì´ë¸” ìƒì„± í›„ `setVisible(False)`ë¡œ ì„¤ì •
- `QLabel`ë¡œ ì›¹ìº  ì˜ìƒ ë ˆì´ë¸” ìƒì„±
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/21119323-3367-4d59-8dbb-bb420df72c3e" width="35%"/>

<details>
    <summary> <img src="https://img.shields.io/badge/__init__-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def __init__(self):
      super().__init__()
      
      self.setWindowTitle('ì¸ìƒë„¤ì»· PC.ver')
      self.setGeometry(200, 200, 880, 500)
      
      self.startBtn = QPushButton('ì‹œì‘', self)
      self.startBtn.setGeometry(10, 10, 100, 30)
      self.startBtn.clicked.connect(self.startFunction)
      
      self.photoBtn = QPushButton('ì´¬ì˜', self)
      self.photoBtn.setGeometry(10, 45, 100, 30)
      self.photoBtn.clicked.connect(self.photoFunction)
      self.photoBtn.setEnabled(False)
      
      self.rephotoBtn = QPushButton('ì¬ì´¬ì˜', self)
      self.rephotoBtn.setGeometry(10, 80, 100, 30)
      self.rephotoBtn.clicked.connect(self.rephotoFunction)
      self.rephotoBtn.setEnabled(False)
      
      self.saveBtn = QPushButton('ì €ì¥', self)
      self.saveBtn.setGeometry(10, 115, 100, 30)
      self.saveBtn.clicked.connect(self.savcloseFunction)
      self.saveBtn.setEnabled(False)
      
      self.closeBtn = QPushButton('ë‚˜ê°€ê¸°', self)
      self.closeBtn.setGeometry(10, 150, 100, 30)
      self.closeBtn.clicked.connect(self.closeFunction)
      
      self.filter1 = QRadioButton('í•„í„°1', self)
      self.filter1.setGeometry(130, 10, 100, 30)
      self.filter1.clicked.connect(self.sunglassFunction)
      self.filter1.setEnabled(False)
      
      self.filter2 = QRadioButton('í•„í„°2', self)
      self.filter2.setGeometry(130, 40, 100, 30)
      self.filter2.clicked.connect(self.blushFunction)
      self.filter2.setEnabled(False)
      
      self.filter3 = QRadioButton('í•„í„°3', self)
      self.filter3.setGeometry(130, 70, 100, 30)
      self.filter3.clicked.connect(self.heartFunction)
      self.filter3.setEnabled(False)
      
      self.filter4 = QRadioButton('í•„í„°4', self)
      self.filter4.setGeometry(130, 100, 100, 30)
      self.filter4.clicked.connect(self.cloudFunction)
      self.filter4.setEnabled(False)
      
      self.filter5 = QRadioButton('í•„í„°5', self)
      self.filter5.setGeometry(130, 130, 100, 30)
      self.filter5.clicked.connect(self.macheartFunction)
      self.filter5.setEnabled(False)
      
      self.nofilter = QRadioButton('í•„í„°x', self)
      self.nofilter.setGeometry(130, 160, 100, 30)
      self.nofilter.clicked.connect(self.nofilterFunction)
      self.nofilter.setEnabled(False)
      
      self.label = QLabel('0/4', self)
      self.label.setGeometry(150, 450, 100, 30)
      self.label.setAlignment(Qt.AlignCenter)
      self.label.setVisible(False)
      
      self.img_label = QLabel('', self)
      self.img_label.setGeometry(230, 10, 640, 480)
  ```
</details>

### ì‹œì‘ ê¸°ëŠ¥
- ì‹œì‘ ë²„íŠ¼ í´ë¦­ ì‹œ `startFuction()` í•¨ìˆ˜ í˜¸ì¶œ
- `cap`ê³¼ `mesh` ë³€ìˆ˜ ì´ˆê¸°í™” í›„ `startVideo()` í•¨ìˆ˜ í˜¸ì¶œ
- `showVideo()` í•¨ìˆ˜ í˜¸ì¶œí•˜ì—¬ `img_lable`ì— ì›¹ìº  ì˜ìƒ í‘œì‹œ
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/5c00a0ec-f410-4356-95c7-3e2ebe42a1e7" width="35%"/>

<details>
    <summary> <img src="https://img.shields.io/badge/startFuction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def startFunction(self):
      #ì‹œì‘
      self.startBtn.setEnabled(False)
      self.photoBtn.setEnabled(True)
      self.filter1.setEnabled(True)
      self.filter2.setEnabled(True)
      self.filter3.setEnabled(True)
      self.filter4.setEnabled(True)
      self.filter5.setEnabled(True)
      self.nofilter.setEnabled(True)
      self.label.setVisible(True)
      
      global cap
      cap = cv.VideoCapture(0, cv.CAP_DSHOW)
      self.imgs=[]
      
      global mesh
      mp_mesh = mp.solutions.face_mesh 
      mesh = mp_mesh.FaceMesh(max_num_faces=4, refine_landmarks=True, min_detection_confidence=0.5,
                              min_tracking_confidence=0.5)
      
      self.startVideo()

  def startVideo(self):
      while True:
          ret, self.frame = cap.read()
          if not ret:
              print('í”„ë ˆì„ íšë“ ì‹¤íŒ¨')
              break
          
          self.showVideo()
            
  def showVideo(self):
      img = cv.cvtColor(cv.flip(self.frame, 1), cv.COLOR_BGR2RGB)
      img = QImage(img.data, self.frame.shape[1], self.frame.shape[0], self.frame.shape[1]*self.frame.shape[2],
                   QImage.Format_RGB888)
      pixmap = QPixmap.fromImage(img)
      self.img_label.setPixmap(pixmap)
      
      cv.waitKey(1)
  ```
</details>


### ì„ ê¸€ë¼ìŠ¤ í•„í„°
- `sunglass` ë³€ìˆ˜ë¥¼ `sunglass.png`ë¡œ ì´ˆê¸°í™”
- `process`ë¥¼ í†µí•´ ì–¼êµ´ ê°ì²´ ê²€ì¶œ
- `landmark`ì—ì„œ ì–‘ìª½ ëˆˆì˜ ì‹œì‘ì , ëì , ì¤‘ì•™ ëœë“œë§ˆí¬ ì¢Œí‘œ ê°€ì ¸ì˜´
- ì–¼êµ´ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ê³  í•„í„° í¬ê¸°ë¥¼ ì ì ˆíˆ ì¡°ì ˆí•˜ì—¬ í”„ë ˆì„ì— ì ìš©
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/339edec5-eadb-4ba3-990b-3602542c721f"/>

<details>
    <summary> <img src="https://img.shields.io/badge/sunglassFunction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def sunglassFunction(self, state):
      # ì„ ê¸€ë¼ìŠ¤ í•„í„°
      while True:
          ret, self.frame = cap.read()
          
          sunglass = cv.imread('sunglass.png', cv.IMREAD_UNCHANGED)
  
          res = mesh.process(cv.cvtColor(self.frame, cv.COLOR_BGR2RGB))

          if res.multi_face_landmarks:
              for landmarks in res.multi_face_landmarks:
                  eye_lx, eye_ly = 0, 0
                  eye_rx, eye_ry = 0, 0
                  eye_cx, eye_cy = 0, 0
                  
                  for id, p in enumerate(landmarks.landmark):
                      x, y = int(p.x*self.frame.shape[1]), int(p.y*self.frame.shape[0])
                      if id == 446:
                         eye_lx, eye_ly = x, y
                      if id == 226:
                          eye_rx, eye_ry = x, y
                      if id == 6:
                         eye_cx, eye_cy = x, y
                             
                  eye_w = eye_lx-eye_rx
                  eye_h = int(eye_w/1.8)
                      
                  x1, x2 = int(eye_cx - eye_w), int(eye_cx + eye_w)
                  y1, y2 = int(eye_cy - 1.25*eye_h/2), int(eye_cy + 2.75*eye_h/2)
                  
                  if eye_w > 0 and eye_h > 0 and x1 > 0 and y1 > 0 and x2 < self.frame.shape[1] and y2 < self.frame.shape[0]:
                      sunglasses = cv.resize(sunglass, dsize=(2*eye_w, 2*eye_h))
                      alpha = sunglasses[:, :, 3:]/255
                      self.frame[y1:y2, x1:x2] = self.frame[y1:y2, x1:x2]*(1-alpha) + sunglasses[:, :, :3]*alpha
                  
              
          self.showVideo()
  ```
</details>

### ë³¼í„°ì¹˜ í•„í„°
- `blush` ë³€ìˆ˜ë¥¼ `blush.png`ë¡œ ì´ˆê¸°í™”
- `process`ë¥¼ í†µí•´ ì–¼êµ´ ê°ì²´ ê²€ì¶œ
- `landmark`ì—ì„œ ì–‘ìª½ ë³¼ì˜ ì™¼ìª½ë, ì˜¤ë¥¸ìª½ë, ì¤‘ì•™ ëœë“œë§ˆí¬ ì¢Œí‘œ ê°€ì ¸ì˜´
- ì–¼êµ´ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ê³  í•„í„° í¬ê¸°ë¥¼ ì ì ˆíˆ ì¡°ì ˆí•˜ì—¬ í”„ë ˆì„ì— ì ìš©
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/06275901-0bd6-4cb3-ac25-5f8c40a9c2f4"/>

<details>
    <summary> <img src="https://img.shields.io/badge/blushFunction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
   def blushFunction(self, state):
       # ë³¼í„°ì¹˜ í•„í„°
       while True:
           ret, self.frame = cap.read()
           
           blush = cv.imread('blush.png', cv.IMREAD_UNCHANGED)
           
           res = mesh.process(cv.cvtColor(self.frame, cv.COLOR_BGR2RGB))
   
           if res.multi_face_landmarks:
               for landmarks in res.multi_face_landmarks:
                   lcheek_lx, lcheek_ly = 0, 0
                   lcheek_rx, lcheek_ry = 0, 0
                   lcheek_cx, lcheek_cy = 0, 0
                   
                   rcheek_lx, rcheek_ly = 0, 0
                   rcheek_rx, rcheek_ry = 0, 0
                   rcheek_cx, rcheek_cy = 0, 0
                   
                   for id, p in enumerate(landmarks.landmark):
                       x, y = int(p.x*self.frame.shape[1]), int(p.y*self.frame.shape[0])
                       if id == 366:
                           lcheek_lx, lcheek_ly = x, y
                       if id == 358:
                           lcheek_rx, lcheek_ry = x, y
                       if id == 280:
                           lcheek_cx, lcheek_cy = x, y
                       if id == 129:
                           rcheek_lx, rcheek_ly = x, y
                       if id == 137:
                           rcheek_rx, rcheek_ry = x, y
                       if id == 50:
                           rcheek_cx, rcheek_cy = x, y
                           
                   lcheek_w, rcheek_w = lcheek_lx-lcheek_rx, rcheek_lx-rcheek_rx
                   lcheek_h, rcheek_h = lcheek_w, rcheek_w
                       
                   x1, x2 = int(lcheek_cx - lcheek_w), int(lcheek_cx + lcheek_w)
                   y1, y2 = int(lcheek_cy - lcheek_h), int(lcheek_cy + lcheek_h)
                   
                   if lcheek_w > 0 and lcheek_h > 0 and x1 > 0 and y1 > 0 and x2 < self.frame.shape[1] and y2 < self.frame.shape[0]:
                       lblush = cv.resize(blush, dsize=(2*lcheek_w, 2*lcheek_h))
                       alpha = lblush[:, :, 3:]/255
                       self.frame[y1:y2, x1:x2] = self.frame[y1:y2, x1:x2]*(1-alpha) + lblush[:, :, :3]*alpha
                       
                   x3, x4 = int(rcheek_cx - rcheek_w), int(rcheek_cx + rcheek_w)
                   y3, y4 = int(rcheek_cy - rcheek_h), int(rcheek_cy + rcheek_h)
                   
                   if rcheek_w > 0 and rcheek_h > 0 and x3 > 0 and y3 > 0 and x4 < self.frame.shape[1] and y4 < self.frame.shape[0]:
                       rblush = cv.resize(blush, dsize=(2*rcheek_w, 2*rcheek_h))
                       alpha = rblush[:, :, 3:]/255
                       self.frame[y3:y4, x3:x4] = self.frame[y3:y4, x3:x4]*(1-alpha) + rblush[:, :, :3]*alpha
               
           self.showVideo()
  ```
</details>

### ë³¼í•˜íŠ¸ í•„í„°
- `heart` ë³€ìˆ˜ë¥¼ `heart.png`ë¡œ ì´ˆê¸°í™”
- `process`ë¥¼ í†µí•´ ì–¼êµ´ ê°ì²´ ê²€ì¶œ
- `landmark`ì—ì„œ ì–‘ìª½ ë³¼ì˜ ì™¼ìª½ë, ì˜¤ë¥¸ìª½ë, ì¤‘ì•™ ëœë“œë§ˆí¬ ì¢Œí‘œ ê°€ì ¸ì˜´
- ì–¼êµ´ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ê³  í•„í„° í¬ê¸°ë¥¼ ì ì ˆíˆ ì¡°ì ˆí•˜ì—¬ í”„ë ˆì„ì— ì ìš©
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/9cfd29ae-6086-4147-b05d-6ae03e2f4f6e"/>

<details>
    <summary> <img src="https://img.shields.io/badge/heartFunction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def heartFunction(self, state):
      # ë³¼í•˜íŠ¸ í•„í„°
      while True:
          ret, self.frame = cap.read()
          
          heart = cv.imread('heart.png', cv.IMREAD_UNCHANGED)
          
          res = mesh.process(cv.cvtColor(self.frame, cv.COLOR_BGR2RGB))
  
          if res.multi_face_landmarks:
              for landmarks in res.multi_face_landmarks:
                  lcheek_lx, lcheek_ly = 0, 0
                  lcheek_rx, lcheek_ry = 0, 0
                  lcheek_cx, lcheek_cy = 0, 0
                  
                  rcheek_lx, rcheek_ly = 0, 0
                  rcheek_rx, rcheek_ry = 0, 0
                  rcheek_cx, rcheek_cy = 0, 0
                  
                  for id, p in enumerate(landmarks.landmark):
                      x, y = int(p.x*self.frame.shape[1]), int(p.y*self.frame.shape[0])
                      if id == 366:
                          lcheek_lx, lcheek_ly = x, y
                      if id == 358:
                          lcheek_rx, lcheek_ry = x, y
                      if id == 280:
                          lcheek_cx, lcheek_cy = x, y
                      if id == 129:
                          rcheek_lx, rcheek_ly = x, y
                      if id == 137:
                          rcheek_rx, rcheek_ry = x, y
                      if id == 50:
                          rcheek_cx, rcheek_cy = x, y
                          
                  lcheek_w, rcheek_w = lcheek_lx-lcheek_rx, rcheek_lx-rcheek_rx
                  lcheek_h, rcheek_h = lcheek_w, rcheek_w
                      
                  x1, x2 = int(lcheek_cx - lcheek_w/2), int(lcheek_cx + lcheek_w/2)
                  y1, y2 = int(lcheek_cy - lcheek_h/2), int(lcheek_cy + lcheek_h/2)
                  
                  if lcheek_w > 0 and lcheek_h > 0 and x1 > 0 and y1 > 0 and x2 < self.frame.shape[1] and y2 < self.frame.shape[0]:
                      lheart = cv.resize(heart, dsize=(lcheek_w, lcheek_h))
                      alpha = lheart[:, :, 3:]/255
                      self.frame[y1:y2, x1:x2] = self.frame[y1:y2, x1:x2]*(1-alpha) + lheart[:, :, :3]*alpha
                      
                  x3, x4 = int(rcheek_cx - rcheek_w/2), int(rcheek_cx + rcheek_w/2)
                  y3, y4 = int(rcheek_cy - rcheek_h/2), int(rcheek_cy + rcheek_h/2)
                  
                  if rcheek_w > 0 and rcheek_h > 0 and x3 > 0 and y3 > 0 and x4 < self.frame.shape[1] and y4 < self.frame.shape[0]:
                      rheart = cv.resize(heart, dsize=(rcheek_w, rcheek_h))
                      alpha = rheart[:, :, 3:]/255
                      self.frame[y3:y4, x3:x4] = self.frame[y3:y4, x3:x4]*(1-alpha) + rheart[:, :, :3]*alpha
              
          self.showVideo()
  ```
</details>

### êµ¬ë¦„ í•„í„°
- `cloud` ë³€ìˆ˜ë¥¼ `cloud.png`ë¡œ ì´ˆê¸°í™”
- `process`ë¥¼ í†µí•´ ì–¼êµ´ ê°ì²´ ê²€ì¶œ
- `landmark`ì—ì„œ ë¨¸ë¦¬ì˜ ì™¼ìª½ë, ì˜¤ë¥¸ìª½ë, ì¤‘ì•™ ëœë“œë§ˆí¬ ì¢Œí‘œ ê°€ì ¸ì˜´
- ì–¼êµ´ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ê³  í•„í„° í¬ê¸°ë¥¼ ì ì ˆíˆ ì¡°ì ˆí•˜ì—¬ í”„ë ˆì„ì— ì ìš©
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/e3f10b83-a288-4f3f-82ff-b917191261b4"/>

<details>
    <summary> <img src="https://img.shields.io/badge/cloudFunction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def cloudFunction(self, state):
      # êµ¬ë¦„ í•„í„°
      while True:
          ret, self.frame = cap.read()
          
          cloud = cv.imread('cloud.png', cv.IMREAD_UNCHANGED)
          
          res = mesh.process(cv.cvtColor(self.frame, cv.COLOR_BGR2RGB))
  
          if res.multi_face_landmarks:
              for landmarks in res.multi_face_landmarks:
                  head_x, head_y = 0, 0
                  
                  for id, p in enumerate(landmarks.landmark):
                      x, y = int(p.x*self.frame.shape[1]), int(p.y*self.frame.shape[0])
                      if id == 67:
                          head_lx, head_ly = x, y
                      if id == 287:
                          head_rx, head_ry = x, y
                      if id == 10:
                          head_cx, head_cy = x, y
                             
                  head_w = head_rx-head_lx
                  head_h = int(head_w/1.54)
                  
                  x1, x2 = int(head_cx - 3*head_w/2), int(head_cx + 3*head_w/2)
                  y1, y2 = int(head_cy - 7*head_h/2), int(head_cy - head_h/2)
                  
                  if head_w > 0 and head_h > 0 and x1 > 0 and y1 > 0 and x2 < self.frame.shape[1] and y2 < self.frame.shape[0]:
                      clouds = cv.resize(cloud, dsize=(3*head_w, 3*head_h)) 
                      alpha = clouds[:, :, 3:]/255
                      self.frame[y1:y2, x1:x2] = self.frame[y1:y2, x1:x2]*(1-alpha) + clouds[:, :, :3]*alpha
              
          self.showVideo()
  ```
</details>

### ë§¥í•˜íŠ¸ í•„í„°
- `heart` ë³€ìˆ˜ë¥¼ `mac_heart.png`ë¡œ ì´ˆê¸°í™”
- `process`ë¥¼ í†µí•´ ì–¼êµ´ ê°ì²´ ê²€ì¶œ
- `landmark`ì—ì„œ ë¨¸ë¦¬ì˜ ì™¼ìª½ë, ì˜¤ë¥¸ìª½ë, ì¤‘ì•™ ëœë“œë§ˆí¬ ì¢Œí‘œ ê°€ì ¸ì˜´
- ì–¼êµ´ í¬ê¸°ë¥¼ ê³„ì‚°í•˜ê³  í•„í„° í¬ê¸°ë¥¼ ì ì ˆíˆ ì¡°ì ˆí•˜ì—¬ í”„ë ˆì„ì— ì ìš©
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/72953b69-cdd5-49af-b478-60d914041065"/>

<details>
    <summary> <img src="https://img.shields.io/badge/macheartFunction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def heartFunction(self, state):
      # ë³¼í•˜íŠ¸ í•„í„°
      while True:
          ret, self.frame = cap.read()
          
          heart = cv.imread('heart.png', cv.IMREAD_UNCHANGED)
          
          res = mesh.process(cv.cvtColor(self.frame, cv.COLOR_BGR2RGB))
  
          if res.multi_face_landmarks:
              for landmarks in res.multi_face_landmarks:
                  lcheek_lx, lcheek_ly = 0, 0
                  lcheek_rx, lcheek_ry = 0, 0
                  lcheek_cx, lcheek_cy = 0, 0
                  
                  rcheek_lx, rcheek_ly = 0, 0
                  rcheek_rx, rcheek_ry = 0, 0
                  rcheek_cx, rcheek_cy = 0, 0
                  
                  for id, p in enumerate(landmarks.landmark):
                      x, y = int(p.x*self.frame.shape[1]), int(p.y*self.frame.shape[0])
                      if id == 366:
                          lcheek_lx, lcheek_ly = x, y
                      if id == 358:
                          lcheek_rx, lcheek_ry = x, y
                      if id == 280:
                          lcheek_cx, lcheek_cy = x, y
                      if id == 129:
                          rcheek_lx, rcheek_ly = x, y
                      if id == 137:
                          rcheek_rx, rcheek_ry = x, y
                      if id == 50:
                          rcheek_cx, rcheek_cy = x, y
                          
                  lcheek_w, rcheek_w = lcheek_lx-lcheek_rx, rcheek_lx-rcheek_rx
                  lcheek_h, rcheek_h = lcheek_w, rcheek_w
                      
                  x1, x2 = int(lcheek_cx - lcheek_w/2), int(lcheek_cx + lcheek_w/2)
                  y1, y2 = int(lcheek_cy - lcheek_h/2), int(lcheek_cy + lcheek_h/2)
                  
                  if lcheek_w > 0 and lcheek_h > 0 and x1 > 0 and y1 > 0 and x2 < self.frame.shape[1] and y2 < self.frame.shape[0]:
                      lheart = cv.resize(heart, dsize=(lcheek_w, lcheek_h))
                      alpha = lheart[:, :, 3:]/255
                      self.frame[y1:y2, x1:x2] = self.frame[y1:y2, x1:x2]*(1-alpha) + lheart[:, :, :3]*alpha
                      
                  x3, x4 = int(rcheek_cx - rcheek_w/2), int(rcheek_cx + rcheek_w/2)
                  y3, y4 = int(rcheek_cy - rcheek_h/2), int(rcheek_cy + rcheek_h/2)
                  
                  if rcheek_w > 0 and rcheek_h > 0 and x3 > 0 and y3 > 0 and x4 < self.frame.shape[1] and y4 < self.frame.shape[0]:
                      rheart = cv.resize(heart, dsize=(rcheek_w, rcheek_h))
                      alpha = rheart[:, :, 3:]/255
                      self.frame[y3:y4, x3:x4] = self.frame[y3:y4, x3:x4]*(1-alpha) + rheart[:, :, :3]*alpha
              
          self.showVideo()
  ```
</details>

### ì´¬ì˜ ê¸°ëŠ¥
- ì´¬ì˜ ë²„íŠ¼ í´ë¦­ ì‹œ `photoFuction()` í•¨ìˆ˜ í˜¸ì¶œ
- ë²„íŠ¼ì´ ëˆŒë¦´ë•Œ ë§ˆë‹¤ `imgs`ì— `frame` ì €ì¥
- 4ë²ˆ ì´¬ì˜ì„ ì™„ë£Œí•˜ë©´ `imgs`ë¥¼ `np.vstack`ë¡œ ìˆ˜ì§ ê²°í•©í•˜ì—¬ ìƒˆë¡œìš´ ìœˆë„ìš° ì°½ì— í‘œì‹œ
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/5dc3e0ba-bd73-4146-ba25-ec71c66e446d" width="45%"/>

<details>
    <summary> <img src="https://img.shields.io/badge/photoFunction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def photoFunction(self):
      # ì´¬ì˜
      self.imgs.append(cv.flip(self.frame, 1))
      self.label.setText(str(len(self.imgs))+'/4')
      
      if len(self.imgs) > 3:
          self.photoBtn.setEnabled(False)
          self.rephotoBtn.setEnabled(True)
          self.saveBtn.setEnabled(True)
          self.saveBtn.setEnabled(True)
          
          self.stack = cv.resize(self.imgs[0], dsize=(0,0), fx=0.35, fy=0.35)
          for i in range(1, len(self.imgs)):
              self.stack = np.vstack((self.stack, cv.resize(self.imgs[i], dsize=(0,0), fx=0.35, fy=0.35)))
              
              cv.namedWindow(' ')
              cv.moveWindow(' ', 1080, 155)
              cv.imshow(' ', self.stack)
  ```
</details>

### ì¬ì´¬ì˜ ê¸°ëŠ¥
- ì¬ì´¬ì˜ ë²„íŠ¼ í´ë¦­ ì‹œ `rephotoFunction()` í•¨ìˆ˜ í˜¸ì¶œ
- `imgs`ë¥¼ ë¹ˆ ë°°ì—´ë¡œ ì´ˆê¸°í™”

<details>
    <summary> <img src="https://img.shields.io/badge/rephotoFunction-3776AB.svg?style=flat-square"/> </summary>

  ```Python
  def rephotoFunction(self):
      # ì¬ì´¬ì˜
      self.photoBtn.setEnabled(True)
      self.rephotoBtn.setEnabled(False)
      self.saveBtn.setEnabled(False)
      self.imgs=[]
      self.label.setText('0/4')
      cv.destroyWindow(' ')
  ```
</details>

### ì €ì¥ ê¸°ëŠ¥
- `QFileDialog`ìœ¼ë¡œ íŒŒì¼ ì €ì¥ ì´ë¦„ ì„ íƒ í›„ ì´ë¯¸ì§€ ì €ì¥
<img src="https://github.com/irrso/computer-vision-4-snapshots-pc.ver/assets/105829324/0d502cfd-f212-41c1-ada2-8919848e8954" width="35%"/>

 <details>
    <summary> <img src="https://img.shields.io/badge/saveFunction-3776AB.svg?style=flat-square"/> </summary>
   
```Python
  def savcloseFunction(self):
      # ì‚¬ì§„ ì €ì¥
      fname = QFileDialog.getSaveFileName(self, 'íŒŒì¼ ì €ì¥', './', 'Image files (*.jpeg)')
      cv.imwrite(fname[0], self.stack)
  ```
</details>
